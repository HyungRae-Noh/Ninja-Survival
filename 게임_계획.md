# Vampire Survivors 스타일 2D 자동 슈터 게임 계획

## 1. 게임 개요
- **장르**: 탑뷰 2D 자동 슈터 생존 게임
- **플랫폼**: 웹 브라우저 (HTML5 Canvas)
- **기술 스택**: HTML, CSS, JavaScript

## 2. 핵심 게임플레이 메커니즘

### 2.1 플레이어
- 화면 중앙에 위치한 캐릭터
- 방향키/WASD로 이동
- 자동으로 주변 적을 공격
- 체력 시스템 (HP)
- 경험치 획득 및 레벨업

### 2.2 적 시스템
- 화면 가장자리에서 스폰
- 플레이어를 향해 자동 이동
- 플레이어와 충돌 시 데미지
- 처치 시 경험치 드롭
- 시간이 지날수록 스폰 속도 및 수 증가

### 2.3 무기 시스템
- 기본 무기: 원거리 투사체 (자동 발사)
- 레벨업 시 무기 선택 가능
- 무기 종류:
  - 기본 투사체 (직선 발사)
  - 부메랑 (돌아오는 투사체)
  - 레이저 빔 (관통)
  - 폭발 투사체 (범위 데미지)

### 2.4 파워업 시스템
- 레벨업 시 3가지 옵션 중 선택
- 파워업 종류:
  - 공격력 증가
  - 공격 속도 증가
  - 이동 속도 증가
  - 최대 체력 증가
  - 투사체 크기 증가
  - 투사체 속도 증가
  - 범위 증가

### 2.5 경험치 및 레벨업
- 적 처치 시 경험치 획득
- 경험치 오브젝트는 플레이어에게 자동으로 이동
- 레벨업 시 무기/파워업 선택 화면 표시

## 3. 게임 구조

### 3.1 파일 구조
```
2D게임/
├── index.html          # 메인 HTML 파일
├── style.css           # 스타일시트
├── game.js             # 게임 로직
└── 게임_계획.md        # 이 문서
```

### 3.2 주요 클래스/객체

#### Player
- 위치 (x, y)
- 속도
- 체력
- 레벨
- 경험치
- 무기 배열
- 파워업 상태

#### Enemy
- 위치 (x, y)
- 속도
- 체력
- 타입 (일반, 빠른, 강한 등)

#### Projectile
- 위치 (x, y)
- 속도
- 방향
- 데미지
- 타입

#### ExperienceOrb
- 위치 (x, y)
- 경험치 값
- 플레이어를 향한 이동

#### Game
- 게임 상태 관리
- 게임 루프
- 렌더링
- 충돌 감지
- 스폰 시스템

## 4. 구현 단계

### Phase 1: 기본 구조
1. HTML 기본 구조 생성
2. Canvas 설정 및 스타일링
3. 게임 루프 구현
4. 플레이어 생성 및 이동

### Phase 2: 적 시스템
1. 적 스폰 시스템
2. 적 AI (플레이어 추적)
3. 적 렌더링
4. 충돌 감지

### Phase 3: 전투 시스템
1. 투사체 시스템
2. 자동 공격 로직
3. 데미지 계산
4. 적 처치 및 경험치 드롭

### Phase 4: 레벨업 시스템
1. 경험치 수집
2. 레벨업 로직
3. 파워업 선택 UI
4. 파워업 적용

### Phase 5: 게임 밸런싱
1. 난이도 조절 (시간에 따른 스폰 증가)
2. 다양한 적 타입
3. 다양한 무기 타입
4. UI 개선 (체력바, 경험치바, 점수)

### Phase 6: 폴리싱
1. 파티클 효과
2. 사운드 효과 (선택사항)
3. 게임 오버 화면
4. 시작 화면

## 5. 개발 단계별 상세 로드맵

### Phase 1: 기본 구조 및 프로젝트 설정
**예상 시간**: 1-2시간  
**목표**: 게임의 기본 프레임워크 구축

#### 작업 항목
1. **프로젝트 파일 생성**
   - [x] `index.html` 생성 (기본 HTML 구조)
   - [x] `style.css` 생성 (기본 스타일)
   - [x] `game.js` 생성 (게임 로직 파일)

2. **HTML 구조 설정**
   - [x] Canvas 요소 추가
   - [x] HUD 영역 마크업 (체력바, 경험치바 등)
   - [x] 게임 오버/시작 화면 구조
   - [x] 레벨업 선택 UI 구조

3. **CSS 스타일링**
   - [x] 전체 레이아웃 설정
   - [x] Canvas 스타일링 (중앙 정렬, 배경)
   - [x] HUD 스타일링
   - [x] UI 요소 스타일링 (버튼, 바 등)

4. **게임 기본 클래스 구조**
   - [x] `Game` 클래스 생성 (게임 상태 관리)
   - [x] `Player` 클래스 생성 (기본 속성만)
   - [x] 게임 루프 함수 구현 (`requestAnimationFrame`)
   - [x] 기본 렌더링 함수 (화면 클리어)

5. **플레이어 기본 기능**
   - [x] 플레이어 객체 생성 (위치, 크기)
   - [x] 키보드 입력 처리 (방향키/WASD)
   - [x] 플레이어 이동 로직
   - [x] 화면 경계 제한 (카메라 시스템으로 구현)
   - [x] 플레이어 렌더링 (원형)

**체크리스트 완료 기준**: 플레이어가 화면에서 이동 가능해야 함

---

### Phase 2: 적 시스템 구현
**예상 시간**: 2-3시간  
**목표**: 적 스폰, AI, 충돌 시스템 구현  
**의존성**: Phase 1 완료

#### 작업 항목
1. **Enemy 클래스 구현**
   - [x] Enemy 클래스 생성 (위치, 속도, 체력, 반지름)
   - [x] Enemy 생성자 및 기본 메서드
   - [x] Enemy 렌더링 함수

2. **적 스폰 시스템**
   - [x] 스폰 타이머 구현
   - [x] 화면 가장자리 랜덤 위치 스폰 로직
   - [x] 적 배열 관리
   - [x] 초기 스폰 속도 설정 (예: 1초마다 1-2마리)

3. **적 AI (플레이어 추적)**
   - [x] 플레이어 위치 계산
   - [x] 방향 벡터 계산 (플레이어 방향)
   - [x] 정규화 및 속도 적용
   - [x] 적 이동 업데이트

4. **충돌 감지 시스템**
   - [x] 원형 충돌 감지 함수 구현
   - [x] 플레이어-적 충돌 감지
   - [x] 충돌 시 플레이어 데미지 처리
   - [x] 무적 시간 구현 (선택사항)

5. **적 관리 및 최적화**
   - [x] 화면 밖 적 제거
   - [x] 적 배열 정리 로직
   - [x] 성능 최적화 (필요시)

**체크리스트 완료 기준**: 적이 스폰되어 플레이어를 추적하고, 충돌 시 데미지를 입어야 함

---

### Phase 3: 전투 시스템 구현
**예상 시간**: 3-4시간  
**목표**: 투사체 시스템, 자동 공격, 데미지 처리  
**의존성**: Phase 2 완료

#### 작업 항목
1. **Projectile 클래스 구현**
   - [x] Projectile 클래스 생성 (위치, 속도, 방향, 데미지, 반지름)
   - [x] 투사체 생성자
   - [x] 투사체 이동 로직
   - [x] 투사체 렌더링

2. **자동 공격 시스템**
   - [x] 공격 타이머 구현
   - [x] 가장 가까운 적 찾기 함수
   - [x] 투사체 발사 방향 계산
   - [x] 투사체 생성 및 배열 관리
   - [x] 초기 공격 속도 설정 (예: 1초마다 1발)

3. **투사체-적 충돌**
   - [x] 투사체-적 충돌 감지
   - [x] 데미지 계산 및 적용
   - [x] 적 체력 감소
   - [x] 적 사망 처리 (체력 <= 0)

4. **경험치 시스템**
   - [x] ExperienceOrb 클래스 생성
   - [x] 적 처치 시 경험치 오브 생성
   - [x] 경험치 오브 렌더링
   - [x] 경험치 오브가 플레이어를 향해 이동
   - [x] 경험치 수집 로직 (거리 기반)
   - [x] 경험치 값 계산

5. **투사체 관리**
   - [x] 화면 밖 투사체 제거
   - [x] 투사체 배열 정리
   - [x] 투사체 풀링 (선택사항, 성능 최적화)



**체크리스트 완료 기준**: 플레이어가 자동으로 적을 공격하고, 적 처치 시 경험치를 획득해야 함

---

### Phase 4: 레벨업 및 파워업 시스템
**예상 시간**: 3-4시간  
**목표**: 경험치 수집, 레벨업, 파워업 선택 및 적용  
**의존성**: Phase 3 완료

#### 작업 항목
1. **레벨업 시스템**
   - [x] 플레이어 경험치 변수 추가
   - [x] 레벨 변수 추가
   - [x] 경험치 요구량 계산 (레벨에 따라 증가)
   - [x] 레벨업 체크 로직
   - [x] 레벨업 시 게임 일시정지

2. **파워업 데이터 구조**
   - [x] 파워업 타입 정의 (공격력, 공격속도, 이동속도 등)
   - [x] 파워업 데이터 객체 생성
   - [x] 파워업 설명 텍스트

#### 파워업 카드 목록 (개편)

**공격 관련**
- 투사체 공격력 증가
- 투사체 공격속도 증가
- 투사체 관통 수 증가 (파워업 카드 선택마다 관통 0 > 1 > 2...)
- 한번에 나가는 투사체 개수 증가
- 치명타 확률 증가 (치명타는 기본 공격력의 150% 데미지)
- 치명타 데미지 증가

**이동 관련**
- 이동 속도 증가

**성장 관련**
- 경험치 획득량 증가
- 오브 흡수 범위 증가

**방어/체력 관련**
- 최대 체력 증가
- 받는 피해 감소 %
- 체력 절반 회복 (최대 체력의 50% 회복)
- 체력 전부 회복 (최대 체력까지 완전 회복)

**파워업 레벨 시스템**
- 각 파워업 선택 횟수 추적
- 파워업 카드 UI에 현재 레벨 표시 (예: Level 3)
- 처음 선택한 파워업은 레벨 표시 없음
- 2번 이상 선택한 파워업만 레벨 표시

3. **파워업 선택 UI**
   - [x] 레벨업 화면 표시/숨김
   - [x] 3가지 랜덤 파워업 옵션 생성
   - [x] 파워업 카드 UI 렌더링
   - [x] 키보드 입력 처리 (1, 2, 3 또는 화살표)
   - [x] 선택 시 애니메이션과 함께 파워업 적용

4. **파워업 적용 시스템**
   - [x] 플레이어 스탯 변수 추가 (공격력, 공격속도 등)
   - [x] 파워업 효과 적용 함수
   - [x] 스탯 증가 로직 (누적 또는 곱셈)
   - [x] 파워업 효과를 게임플레이에 반영

5. **HUD 업데이트**
   - [x] 경험치바 렌더링
   - [x] 레벨 표시
   - [x] 경험치바 업데이트 로직


**체크리스트 완료 기준**: 경험치를 모아 레벨업하고, 파워업을 선택하여 적용할 수 있어야 함

---

### Phase 5: 게임 밸런싱 및 다양성
**예상 시간**: 2-3시간  
**목표**: 난이도 조절, 다양한 적/무기 타입, UI 개선  
**의존성**: Phase 4 완료

#### 작업 항목
1. **난이도 조절 시스템**
   - [x] 게임 시간 추적
   - [x] 시간에 따른 스폰 속도 증가 (30초마다)
   - [x] 시간에 따른 적 체력 증가 (1분마다)
   - [x] 최대 적 수 제한 (성능 고려)

2. **다양한 적 타입**
   - [x] 적 타입 enum/상수 정의
   - [x] 일반 적 (기본)
   - [x] 빠른 적 (속도 높음, 체력 낮음)
   - [x] 강한 적 (속도 낮음, 체력 높음)
   - [x] 타입별 다른 색상/크기
   - [x] 타입별 다른 경험치 값
    

3. **UI 개선**
   - [x] 체력바 렌더링 및 업데이트
   - [x] 생존 시간 표시
   - [x] 처치 수 카운터
   - [ ] 점수 시스템 (선택사항)
   - [x] UI 레이아웃 개선

4. **게임 밸런스 조정**
   - [x] 초기 스탯 값 조정
   - [x] 경험치 요구량 조정 (1.15배씩 증가)
   - [x] 파워업 효과량 조정
   - [ ] 플레이 테스트 및 밸런스 조정

**체크리스트 완료 기준**: 시간이 지날수록 난이도가 증가하고, 다양한 적과 무기가 있어야 함

---

### Phase 6: 폴리싱 및 완성
**예상 시간**: 2-3시간  
**목표**: 시각 효과, 게임 오버, 시작 화면  
**의존성**: Phase 5 완료

#### 작업 항목
1. **파티클 효과**
   - [ ] Particle 클래스 생성
   - [ ] 적 처치 시 파티클 효과
   - [ ] 충돌 시 파티클 효과
   - [ ] 파티클 렌더링 및 업데이트
   - [ ] 파티클 생명주기 관리

2. **게임 오버 시스템**
   - [ ] 플레이어 체력 0 체크
   - [ ] 게임 오버 화면 표시
   - [ ] 최종 점수/통계 표시
   - [ ] 재시작 버튼/키
   - [ ] 게임 상태 리셋

3. **시작 화면**
   - [ ] 시작 화면 UI 생성
   - [ ] 게임 설명/조작법 표시
   - [ ] 시작 버튼/키 처리
   - [ ] 게임 시작 로직

4. **사운드 효과 (선택사항)**
   - [ ] 사운드 파일 추가
   - [ ] 공격 사운드
   - [ ] 적 처치 사운드
   - [ ] 레벨업 사운드
   - [ ] 배경음악 (선택사항)

5. **최종 테스트 및 버그 수정**
   - [ ] 전체 게임플레이 테스트
   - [ ] 성능 테스트 (FPS 확인)
   - [ ] 버그 수정
   - [ ] 코드 정리 및 주석 추가

6. **추가 개선사항 (선택)**
   - [ ] 로컬 스토리지로 최고 기록 저장
   - [ ] 설정 메뉴 (사운드 on/off 등)
   - [ ] 미니맵 추가
   - [ ] 업적 시스템

**체크리스트 완료 기준**: 완전히 플레이 가능한 게임, 시작부터 게임 오버까지 모든 기능 작동

---

### 개발 우선순위 및 병렬 작업 가능 항목

#### 높은 우선순위 (필수)
1. Phase 1-3: 게임의 핵심 메커니즘
2. Phase 4: 레벨업 시스템 (게임의 핵심 재미 요소)

#### 중간 우선순위 (중요)
3. Phase 5: 밸런싱 및 다양성 (게임의 재미 증가)

#### 낮은 우선순위 (선택)
4. Phase 6: 폴리싱 (게임 완성도 향상)

#### 병렬 작업 가능
- UI 디자인과 게임 로직은 어느 정도 병렬 작업 가능
- 파티클 효과는 다른 시스템과 독립적으로 구현 가능
- 사운드 효과는 게임 로직과 독립적

---

### 예상 총 개발 시간
- **최소**: 13-19시간 (핵심 기능만)
- **권장**: 15-22시간 (모든 기능 포함)
- **완전**: 18-25시간 (폴리싱 및 추가 기능 포함)

---

### 개발 팁
1. **단계별 테스트**: 각 Phase 완료 후 반드시 테스트
2. **버전 관리**: Git 사용 권장 (각 Phase마다 커밋)
3. **점진적 개발**: 한 번에 모든 것을 구현하지 말고 단계적으로
4. **성능 모니터링**: 개발 중간중간 성능 체크 (FPS 확인)
5. **플레이 테스트**: 각 Phase마다 실제 플레이해보며 밸런스 조정

## 6. 기술적 세부사항

### 6.1 렌더링
- Canvas 2D API 사용
- 60 FPS 목표
- requestAnimationFrame 사용

### 6.2 충돌 감지
- 원형 충돌 감지 (거리 기반)
- 효율적인 공간 분할 고려 (필요시)

### 6.3 성능 최적화
- 화면 밖 객체 제거
- 투사체 풀링 (선택사항)
- 효율적인 렌더링 (필요한 것만 그리기)

### 6.4 게임 밸런스
- 초기 난이도: 쉬움
- 30초마다 스폰 속도 증가
- 1분마다 적 체력 증가
- 레벨업 경험치 요구량 점진적 증가

## 7. UI 요소

### 7.1 게임 화면
- 플레이어
- 적들
- 투사체
- 경험치 오브
- 미니맵 (선택사항)

### 7.2 HUD (Head-Up Display)
- 체력바
- 경험치바
- 레벨 표시
- 생존 시간
- 처치 수

### 7.3 레벨업 화면
- 3가지 파워업 옵션
- 각 옵션의 설명
- 키보드/마우스로 선택

## 8. 특수 파워업 시스템

### 8.1 특수 파워업 개요
- 레벨 10 이상일 때 레벨업 시 특수 파워업 등장 (25% 확률)
- 특수 파워업은 하나만 선택 가능 (불 오라, 수리검 호위, 중독 중 하나)
- 특수 파워업 선택 후 해당 증강 파워업이 확률적으로 등장 (30% 확률)

### 8.2 불 오라 (🔥)
**설명**: 플레이어 주변에 지속적으로 데미지를 주는 근접형 빌드

**증강 파워업**:
1. 화염 반경 확대: 오라 범위 +20%
2. 화염 도트 강화: 오라에 닿은 적에게 3초간 화상 부여 (오라 공격력의 40%, 이동속도 -10%)
3. 지옥불 맥동: 5초마다 화염 오라가 폭발하여 큰 AoE 데미지 (오라 데미지 × 300%)

**구현 상태**: ✅ 완료

### 8.3 수리검 호위 (🌀)
**설명**: 플레이어 주변을 도는 투사체 기반의 방어·근접 공격 빌드

**증강 파워업**:
1. 회전 수리검 +1: 회전하는 수리검 개수 +1
2. 회전 속도 증가: 수리검 회전 속도 +30%
3. 강화 수리검 (관통 부여): 수리검이 적을 관통 (관통 시 데미지 60%)

**구현 상태**: ✅ 완료

### 8.4 중독 (🧪)
**설명**: 적에게 도트 데미지(중독) 부여하는 지속 피해 기반의 고효율 스택형 빌드

**증강 파워업**:
1. 중독 중첩 증가: 중독이 1회 더 중첩 가능 (기본 1중첩 → 2중첩, 최대 3중첩)
2. 중독 확산: 중독된 적이 사망할 때 주변 적에게 50% 효과로 전염
3. 독성 강화: 중독 데미지 +40%, 중독 지속 시간 +1초

**구현 상태**: ✅ 완료

## 9. 확장 가능성
- 다양한 캐릭터 선택
- 더 많은 무기 종류(특수 파워업)
- 보스 전투
- 스테이지 시스템
- 업적 시스템
- 로컬 스토리지로 최고 기록 저장

## png file 가이드
img 폴더안에  png파일이 있는데  가로세로 64 * 64 사이즈임 그리고 그 시트안에 16 * 16 픽셀인 이미지가 4행 4열로 총 16개 들어있음. 1열엔 아래로움직일때 이미지들. 2열엔 윗방향. 3열엔 왼쪽. 4열엔 오른쪽 방향으로 움직일때의 이미지야